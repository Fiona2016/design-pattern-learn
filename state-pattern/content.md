# çŠ¶æ€æ¨¡å¼
## 1. æ¶æ„è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ
* åˆé€‚çš„æ—¶æœºåˆé€‚çš„ä»£ç ç»“æ„
## 2. æ§åˆ¶åè½¬(Inversion of Control)
* ç³»ç»Ÿè¡Œä¸º -> æ§åˆ¶æµ -> æºä»£ç ä¾èµ–å…³ç³»
* æ¦‚å¿µ
* é«˜å±‚æ¬¡ä¸ä¾èµ–äºä½å±‚æ¬¡ï¼Œå…±åŒä¾èµ–äºæŠ½è±¡
* æŠ½è±¡ä¸ä¾èµ–å…·ä½“ï¼Œå…·ä½“ä¾èµ–äºæŠ½è±¡
* é¢å‘æ¥å£ç¼–ç¨‹ï¼Œè€Œéé¢å‘å®ç°ç¼–ç¨‹
* å…·ä½“ç¤ºä¾‹
	* Player
	* App
	* Service
* å®ç°æ–¹å¼
	* ä¾èµ–æ³¨å…¥
  	* Service
  	* App
	* ä¾èµ–æŸ¥æ‰¾
## 3. çŠ¶æ€æ¨¡å¼
   1. å®šä¹‰ï¼š çŠ¶æ€æ¨¡å¼(State)å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜çš„æ—¶å€™æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œå¯¹è±¡çœ‹èµ·æ¥ä¼¼ä¹ä¿®æ”¹äº†å®ƒçš„ç±»ã€‚
   2. è§£è¯»ï¼š æˆ‘ä»¬ä»¥é€—å·åˆ†å‰²ï¼ŒæŠŠè¿™å¥è¯åˆ†ä¸ºä¸¤éƒ¨åˆ†æ¥çœ‹ã€‚ç¬¬ä¸€éƒ¨åˆ†çš„æ„æ€æ˜¯å°†çŠ¶æ€å°è£…æˆç‹¬ç«‹çš„ç±»ï¼Œå¹¶ å°†è¯·æ±‚å§”æ‰˜ç»™å½“å‰çš„çŠ¶æ€å¯¹è±¡ï¼Œå½“å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶ï¼Œä¼šå¸¦æ¥ä¸åŒçš„è¡Œä¸ºå˜åŒ–ã€‚ç”µç¯çš„ä¾‹å­ è¶³ä»¥è¯´æ˜è¿™ä¸€ç‚¹ï¼Œåœ¨ off å’Œ on è¿™ä¸¤ç§ä¸åŒçš„çŠ¶æ€ä¸‹ï¼Œæˆ‘ä»¬ç‚¹å‡»åŒä¸€ä¸ªæŒ‰é’®ï¼Œå¾—åˆ°çš„è¡Œä¸ºåé¦ˆæ˜¯æˆª ç„¶ä¸åŒçš„ã€‚ç¬¬äºŒéƒ¨åˆ†æ˜¯ä»å®¢æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„å¯¹è±¡ï¼Œåœ¨ä¸åŒçš„çŠ¶æ€ä¸‹å…·æœ‰æˆªç„¶ä¸åŒçš„è¡Œä¸ºï¼Œè¿™ ä¸ªå¯¹è±¡çœ‹èµ·æ¥æ˜¯ä»ä¸åŒçš„ç±»ä¸­å®ä¾‹åŒ–è€Œæ¥çš„ï¼Œå®é™…ä¸Šè¿™æ˜¯ä½¿ç”¨äº†å§”æ‰˜çš„æ•ˆæœã€‚
   3. å‰æ
      * çŠ¶æ€å¤š ( >2 )
      * çŠ¶æ€åˆ‡æ¢çš„åŠ¨ä½œé‡ ( >3 )
      * çŠ¶æ€ä¹‹é—´äº’ç›¸è½¬åŒ–é¢‘ç¹
      * å¯ç”¨æœ‰é™çŠ¶æ€æœºæè¿°
   4. ä¾‹å­
      1. Light
      2. upload ![image](./image/file-upload.png)
      3. Document ![image](image/document.png)
      4. æ‰‹æœºåœ¨ä¸åŒåœºæ™¯ä¸‹ï¼Œhomeé”®å“åº”
         1. lock -> unlock
         2. list -> back to home
         3. in application -> quit
      5. Player ![image](image/player.png)
   5. å®é™…åº”ç”¨åœºæ™¯
      1. [è®¾è®¡æ¨¡å¼åœ¨ç¾å›¢å¤–å–è¥é”€ä¸šåŠ¡ä¸­çš„åº”ç”¨](https://tech.meituan.com/2020/03/19/design-pattern-practice-in-marketing.html)
      2. å¤‡æ¡ˆ
   6. å¦‚ä½•å®æ–½
      1. Contextæ˜¯è°
      2. Stateæœ‰å“ªäº›
      3. æœ‰å“ªäº›è¡Œä¸º
      4. context ä¸ stateå…³è”
   7. ä¼˜ç¼ºç‚¹
      1. ä¼˜ç‚¹
				 * å•ä¸€èŒè´£
				 * å¼€é—­åŸåˆ™
				 * æå‡ä»£ç å¯è¯»æ€§
      2. ç¼ºç‚¹
         * çŠ¶æ€è†¨èƒ€
         * å¦‚æœçŠ¶æ€å°‘æˆ–è€…åˆ‡æ¢ä¸é¢‘ç¹ï¼Œè¿‡æ¸¡è®¾è®¡
   8. ä¸ç­–ç•¥æ¨¡å¼åŒºåˆ«
## 4. æœ‰é™çŠ¶æ€æœº
1. åˆå§‹å€¼ã€çŠ¶æ€ã€æµè½¬ã€æµè½¬æ§åˆ¶
2. ä¸¾ä¸ªæ —å­ğŸŒ°
## 5. å°ç»“
* æ§åˆ¶åè½¬éå¸¸é‡è¦ï¼Œé¢å‘æ¥å£ç¼–ç¨‹ï¼Œè€Œéé¢å‘å®ç°ç¼–ç¨‹
* çŠ¶æ€æ¨¡å¼ä½¿ç”¨å‰æï¼ŒçŠ¶æ€å¤šï¼Œåˆ‡æ¢é¢‘ç¹ä¸”é‡
* ä¸è¦overkill
* æœ‰é™çŠ¶æ€æœºå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç®¡ç†çŠ¶æ€çš„æµè½¬
## 5. refs
1. [æ¨èä¸€ä¸ªæœ‰è¶£çš„ç½‘ç«™ï¼Œæ–¹ä¾¿å­¦ä¹ è®¾è®¡æ¨¡å¼](https://refactoring.guru/design-patterns/state/typescript/example)
2. [è®¾è®¡æ¨¡å¼åœ¨ç¾å›¢å¤–å–è¥é”€ä¸šåŠ¡ä¸­çš„åº”ç”¨](https://tech.meituan.com/2020/03/19/design-pattern-practice-in-marketing.html)
3. JavaScriptè®¾è®¡æ¨¡å¼ä¸å¼€å‘å®è·µ.pdf
4. [javascript-state-machine](https://github.com/jakesgordon/javascript-state-machine)
